<launch>

  <arg name="machine" default="topside" />
  <arg name="node_start_delay" default="1.0" />

  <!-- Machine Definitions -->
  <include file="$(find bluerov)/cfg/bluerov.machine" />

  <!-- Start the joystick driver -->
  <node respawn="true" pkg="joy" type="joy_node" name="joy_node" output="screen">
    <param name="dev" value="/dev/f310controller" type="string" />
    <remap from="joy" to="joy_f310" />
  </node>

  <!-- remap from f310 mappings to xbox mappings -->
  <!--<node pkg="bluerov_teleop" type="joystick_remapper" name="joystick_remapper" output="screen"
                    required="true" machine="$(arg machine)">
    <param name="user_warning" value="Make sure the Mode light is off on the F310 controller!" type="str" />
    <param name="joy_source" value="joy_f310" type="str" />
    <param name="joy_dest" value="joy" type="str" />
    <param name="test" value="2" type="int" />
  </node>-->

  <!-- Teleop node -->
  <node pkg="bluerov_teleop" type="bluerov_teleop_node" name="bluerov_teleop" output="screen"
                    required="true" machine="$(arg machine)" launch-prefix="bash -c 'sleep $(arg node_start_delay); $0 $@' ">
    <param name="joystick" value="f310" type="string" />
    <param name="joy_topic" value="joy_f310" type="string" />
  </node>

</launch>
