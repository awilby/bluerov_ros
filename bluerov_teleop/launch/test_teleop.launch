<?xml version="1.0"?>

<launch>

    <arg name="machine" default="topside" />
    <arg name="node_start_delay" default="1.0" />

    <!-- Machine Definitions -->
    <include file="$(find bluerov)/cfg/bluerov.machine" />


  <!-- start the joystick driver -->
  <node respawn="true" pkg="joy" type="joy_node" name="joy_node" output="screen" machine="$(arg machine)">
    <param name="dev" value="/dev/xboxcontroller" type="string"/>
    <remap from="joy" to="joy_f310"/>
  </node>

  <!-- remap from f310 mappings to xbox mappings -->
  <node pkg="bluerov_teleop" type="joystick_remapper" name="joystick_remapper" output="screen" required="true" machine="$(arg machine)">
    <param name="user_warning" value="Make sure the Mode light is off on the F310 controller!" type="str"/>
    <param name="joy_source" value="joy_f310" type="str"/>
    <param name="joy_dest" value="joy" type="str"/>
    <param name="test" value="2" type="int"/>
  </node>

  <!-- start the teleop app -->
  <node pkg="bluerov_teleop" type="teleop_joy" name="teleop_joy" output="screen" required="true" machine="$(arg machine)"></node>
</launch>
